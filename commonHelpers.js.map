{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/classes.js","../src/main.js"],"sourcesContent":["export function galleryTemplate({webformatURL, largeImageURL, tags, likes, views, comments, downloads}){\n    return `<li class=\"gallery-list\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"img-gallery\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n    <div class=\"info-img\">\n      \n      <div>\n        <h3>Likes</h3>\n        <p>${likes}</p>\n      </div>\n\n      <div>\n        <h3>Views</h3>\n        <p>${views}</p>\n      </div>\n\n      <div>\n        <h3>Comments</h3>\n        <p>${comments}</p>\n      </div>\n\n      <div>\n        <h3>Downloads</h3>\n        <p>${downloads}</p>\n      </div>\n\n    </div>\n  </li>`};","export const API_KEY = '42358755-2f91a8a1ff3edf8f2432f22e1';\nexport  const BASE_URL = 'https://pixabay.com/api/';\n  \n","function hiddenRemove(elements){\n    elements.classList.remove('hidden');\n}\n\nfunction hiddenAdd(elements){\n    elements.classList.add('hidden');\n}\n\nexport {hiddenRemove, hiddenAdd};","//Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\n//Import more data and functions\nimport {galleryTemplate} from \"./js/render-functions\";\nimport { API_KEY, BASE_URL } from \"./js/pixabay-api\";\nimport { hiddenRemove, hiddenAdd } from \"./js/classes\";\n\n//References DOM elements\nconst refs = {\n   searchForm: document.querySelector('.search-form'),\n   galleryList: document.querySelector('.gallery'),\n   loader: document.querySelector('.loader'),\n   btnLodeMore: document.querySelector('.load-btn'),\n}\n\nlet lightbox;\nlet page = 1;\nlet per_page = 15;\nlet searchQuery = '';\n\n// Submit form\nrefs.searchForm.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    hiddenRemove(refs.loader);\n    hiddenAdd(refs.btnLodeMore);\n    refs.galleryList.innerHTML = '';\n    page = 1;\n    searchQuery = e.target.elements.query.value;\n    \n    try{\n      const data = await fetchImages(searchQuery);\n      createMarkup(data.hits);\n    } catch (error){\n      hiddenAdd(refs.btnLodeMore);\n        iziToast.error({\n              message: `${error}`,\n              position: 'topRight',\n              backgroundColor: 'red',\n              messageColor: 'white',});\n           \n    } finally{\n      refs.searchForm.reset();\n      hiddenAdd(refs.loader);\n    };\n  };\n\n//Click button \"Lode more\"\nrefs.btnLodeMore.addEventListener('click', onLoadMoreClick);\n\nasync function onLoadMoreClick(){\n    page+=1;\n    hiddenRemove(refs.loader);\n  try{\n    const data = await fetchImages(searchQuery);\n    createMarkup(data.hits);\n    window.scrollBy({\n      top: 400,\n      behavior: \"smooth\",\n    });\n\n    if (page * per_page > data.totalHits) {\n      hiddenAdd(refs.btnLodeMore);\n      throw new Error('We\\'re sorry, but you\\'ve reached the end of search results.');\n    }\n  }catch(error){\n    iziToast.error({\n      message: ` ${error}`,\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor: 'white',});\n      hiddenAdd(refs.btnLodeMore);\n    }finally{\n      hiddenAdd(refs.loader);\n    }\n}\n  \n\n// Create markup gallary\n  function createMarkup(arr){\n      if (arr.length === 0){\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          backgroundColor: 'red',\n          messageColor: 'white',});\n          \n      } else {\n        const markup =arr.map(galleryTemplate).join('');\n        refs.galleryList.insertAdjacentHTML('beforeend', markup);\n        lightbox = new SimpleLightbox('.gallery a', {\n          captionDelay: 250,\n          captionsData: 'alt',\n        });\n        lightbox.refresh();\n        hiddenRemove(refs.btnLodeMore);\n      }  \n  }\n\n\n// Fetch images\nasync function fetchImages(query){\n  const responce = await axios(BASE_URL, {\n      params: {\n          key: API_KEY,\n          q: query,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          per_page,\n          page,\n      }\n  });\n\nreturn responce.data;\n};\n\n"],"names":["galleryTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","BASE_URL","hiddenRemove","elements","hiddenAdd","refs","lightbox","page","per_page","searchQuery","onFormSubmit","data","fetchImages","createMarkup","error","iziToast","onLoadMoreClick","arr","markup","SimpleLightbox","query","axios"],"mappings":"owBAAO,SAASA,EAAgB,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAE,CACnG,MAAO;AAAA,oCACyBL,CAAa,mCAAmCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,aAKjGC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,aAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,aAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,aAKRC,CAAS;AAAA;AAAA;AAAA;AAAA,QAId,CC1BD,MAAMC,EAAU,qCACTC,EAAW,2BCDzB,SAASC,EAAaC,EAAS,CAC3BA,EAAS,UAAU,OAAO,QAAQ,CACtC,CAEA,SAASC,EAAUD,EAAS,CACxBA,EAAS,UAAU,IAAI,QAAQ,CACnC,CCOA,MAAME,EAAO,CACV,WAAY,SAAS,cAAc,cAAc,EACjD,YAAa,SAAS,cAAc,UAAU,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,WAAW,CAClD,EAEA,IAAIC,EACAC,EAAO,EACPC,EAAW,GACXC,EAAc,GAGlBJ,EAAK,WAAW,iBAAiB,SAAUK,CAAY,EAEvD,eAAeA,EAAa,EAAG,CAC3B,EAAE,eAAc,EAChBR,EAAaG,EAAK,MAAM,EACxBD,EAAUC,EAAK,WAAW,EAC1BA,EAAK,YAAY,UAAY,GAC7BE,EAAO,EACPE,EAAc,EAAE,OAAO,SAAS,MAAM,MAEtC,GAAG,CACD,MAAME,EAAO,MAAMC,EAAYH,CAAW,EAC1CI,EAAaF,EAAK,IAAI,CACvB,OAAQG,EAAM,CACbV,EAAUC,EAAK,WAAW,EACxBU,EAAS,MAAM,CACT,QAAS,GAAGD,CAAK,GACjB,SAAU,WACV,gBAAiB,MACjB,aAAc,OAAO,CAAE,CAErC,QAAa,CACPT,EAAK,WAAW,QAChBD,EAAUC,EAAK,MAAM,CAC3B,CAEA,CAEAA,EAAK,YAAY,iBAAiB,QAASW,CAAe,EAE1D,eAAeA,GAAiB,CAC5BT,GAAM,EACNL,EAAaG,EAAK,MAAM,EAC1B,GAAG,CACD,MAAMM,EAAO,MAAMC,EAAYH,CAAW,EAO1C,GANAI,EAAaF,EAAK,IAAI,EACtB,OAAO,SAAS,CACd,IAAK,IACL,SAAU,QAChB,CAAK,EAEGJ,EAAOC,EAAWG,EAAK,UACzB,MAAAP,EAAUC,EAAK,WAAW,EACpB,IAAI,MAAM,4DAA8D,CAEjF,OAAMS,EAAM,CACXC,EAAS,MAAM,CACb,QAAS,IAAID,CAAK,GAClB,SAAU,WACV,gBAAiB,MACjB,aAAc,OAAO,CAAE,EACvBV,EAAUC,EAAK,WAAW,CAChC,QAAK,CACCD,EAAUC,EAAK,MAAM,CACtB,CACL,CAIE,SAASQ,EAAaI,EAAI,CACtB,GAAIA,EAAI,SAAW,EACjBF,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,WACV,gBAAiB,MACjB,aAAc,OAAO,CAAE,MAEpB,CACL,MAAMG,EAAQD,EAAI,IAAIzB,CAAe,EAAE,KAAK,EAAE,EAC9Ca,EAAK,YAAY,mBAAmB,YAAaa,CAAM,EACvDZ,EAAW,IAAIa,EAAe,aAAc,CAC1C,aAAc,IACd,aAAc,KACxB,CAAS,EACDb,EAAS,QAAO,EAChBJ,EAAaG,EAAK,WAAW,CAC9B,CACJ,CAIH,eAAeO,EAAYQ,EAAM,CAajC,OAZmB,MAAMC,EAAMpB,EAAU,CACnC,OAAQ,CACJ,IAAKD,EACL,EAAGoB,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAAZ,EACA,KAAAD,CACH,CACP,CAAG,GAEa,IAChB"}